(this["webpackJsonptodo-frontend"]=this["webpackJsonptodo-frontend"]||[]).push([[0],{108:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(12),o=a.n(c),s=(a(80),a(7)),l=a(17),i=a(8),u=a.n(i),m=a(21),d=a(111),p=a(64),f=a.n(p),b=a(22),v=a(5),E=a.n(v),h=a(65),k=a.n(h),j=a(110),O=a(119),y=a(68),g=a(120),x=Object(n.createContext)(),w=x;function C(){return Object(n.useContext)(x)}var S=Object(n.memo)((function(e){var t=e.task,a=e.addEditTask,n=e.deleteTask,c=e.markAscomplete,o=C().role,s=t._id,l=t.details,i=t.isActive,u=t.childrens,m=t.updatedAt,d=function(e,t){return e.isActive?r.a.createElement("div",{style:{display:"inline",float:t}},r.a.createElement("i",{className:"fa fa-edit mr-2",onClick:function(){return a(e,"Edit task details")}}),r.a.createElement("i",{className:"fa fa-trash mr-2",onClick:function(){return n(e)}}),r.a.createElement("i",{className:"fa fa-check-circle mr-2","aria-hidden":"true",onClick:function(){return c(e)}}),"left"===t?r.a.createElement("i",{className:"fa fa-plus","aria-hidden":"true",onClick:function(){return a(null,"Add sub-task",s)}}):""):r.a.createElement("div",{style:{display:"inline",float:t}},r.a.createElement(j.a,{variant:"secondary"},"Completed"))};return r.a.createElement(y.a,{md:4,className:"taskCard",key:s},r.a.createElement(g.a,{border:i?"dark":"success",style:{fontSize:"1.02em"},className:"mb-2"},r.a.createElement(g.a.Body,null,r.a.createElement(g.a.Title,null,r.a.createElement("span",{className:"fa fa-tasks",style:{marginRight:"15px"}}),l),u.map((function(e){return r.a.createElement(O.a.Item,{key:e._id},e.details,d(e,"right"))})),r.a.createElement(g.a.Text,null),"admin"===o?d(t,"left"):""),r.a.createElement(g.a.Footer,null,r.a.createElement("small",{className:"text-muted"},"Last updated At:"," ",r.a.createElement(k.a,{format:"hh:mm a",withTitle:!0},m)))))}));S.prototype={task:E.a.shape({_id:E.a.bool.isRequired,name:E.a.string.isRequired,director:E.a.string.isRequired})};var T=S,A=a(112);function N(e){var t=e.tasks,a=e.addEditTask,n=e.deleteTask,c=e.markAscomplete,o=t.map((function(e){return r.a.createElement(T,{key:e._id,task:e,addEditTask:a,deleteTask:n,markAscomplete:c})}));return r.a.createElement(d.a,null,r.a.createElement(A.a,null,o.length>0?o:""))}N.defaultProps={};var P=N,R=a(114),I=a(113),L=a(116);function B(e){return r.a.createElement(I.a,{className:"search-box"},r.a.createElement(L.a.Control,Object.assign({"aria-describedby":"inputGroup-sizing-sm",placeholder:"Search",type:"text"},e)))}B.defaultProps={};var H=B,_=[{value:"All",label:"all"},{value:"Active",label:"active"},{value:"Completed",label:"completed"}];var q=function(e){var t=e.onHandleChange,a=e.addEditTask,c=C().role,o=Object(n.useState)({search:"",sortBy:_[0],genre:[]}),i=Object(s.a)(o,2),u=i[0],m=i[1];return Object(n.useEffect)((function(){t(u)}),[u]),r.a.createElement(d.a,{className:"search-area"},r.a.createElement(A.a,null,r.a.createElement(y.a,{md:3},r.a.createElement(H,{placeholder:"Search task",name:"search",type:"text",onChange:function(e){return m(Object(l.a)(Object(l.a)({},u),{},{search:e.target.value}))}})),"admin"===c?r.a.createElement(y.a,null,r.a.createElement(R.a,{className:"btn btn-secondary",onClick:function(){return a(null,"Add task")}},"Add Task")):""))},K=a(69),F=a.n(K),z=a(29),D={baseURL:window.location.href,TASK:"/api/tasks"},G=F.a.create({baseURL:D.baseURL});G.interceptors.request.use((function(e){var t=Object(l.a)({},e);return localStorage.getItem("role")&&(t.headers.role=localStorage.getItem("role")),t.headers["Content-Type"]="application/json",t}),(function(e){return Promise.reject(e)})),G.interceptors.response.use((function(e){return e}),(function(e){return e.response&&-1!==[401,403].indexOf(e.response.status)&&localStorage.removeItem("role"),Promise.reject(e)}));var U=function(e,t){return Object(z.trackPromise)(G.get(e,{params:t}))},W=function(e,t){return Object(z.trackPromise)(G.post(e,t))},J=function(e,t){return Object(z.trackPromise)(G.put(e,t))},Y=function(e){return Object(z.trackPromise)(G.delete(e))},$=function(){var e=Object(m.a)(u.a.mark((function e(t){var a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={search:t.search},e.abrupt("return",U("".concat(D.TASK),a));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),M=function(){var e=Object(m.a)(u.a.mark((function e(t){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Y("".concat(D.TASK,"/").concat(t)));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Q=function(){var e=Object(m.a)(u.a.mark((function e(t){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",W("".concat(D.TASK),t));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),V=function(){var e=Object(m.a)(u.a.mark((function e(t){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",J("".concat(D.TASK,"/").concat(t._id),t));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),X=a(115),Z=function(e){var t=e.show,a=e.onHide,c=e.action,o=e.taskObj,i=e.actioncallback,u=Object(n.useState)({details:"",isActive:!0,parentId:null}),m=Object(s.a)(u,2),d=m[0],p=m[1];Object(n.useEffect)((function(){o&&p(o)}),[o]);return r.a.createElement(X.a,{size:"md",show:t,onHide:a,centered:!0},r.a.createElement(X.a.Header,{closeButton:!0},r.a.createElement(X.a.Title,null,c)),r.a.createElement(X.a.Body,null,r.a.createElement(L.a,{onSubmit:function(e){e.preventDefault(),i(c,d)}},r.a.createElement(L.a.Group,{as:A.a},r.a.createElement(L.a.Label,{column:!0,sm:"2"},"Task"),r.a.createElement(y.a,{sm:"10"},r.a.createElement(L.a.Control,{type:"text",placeholder:"Enter What needs to be done?",value:d.details||"",onChange:function(e){return p(Object(l.a)(Object(l.a)({},d),{},{details:e.target.value}))},required:!0}))),r.a.createElement(X.a.Footer,null,r.a.createElement(R.a,{variant:"secondary",onClick:a},"Close"),r.a.createElement(R.a,{type:"submit",variant:"primary"},"Save Changes")))))};var ee=function(){var e=Object(n.useState)([]),t=Object(s.a)(e,2),a=t[0],c=t[1],o=Object(n.useState)({}),i=Object(s.a)(o,2),p=i[0],v=i[1],E=Object(n.useState)(!1),h=Object(s.a)(E,2),k=h[0],j=h[1],O=Object(n.useState)({}),y=Object(s.a)(O,2),g=y[0],x=y[1],w=Object(n.useState)("Add"),C=Object(s.a)(w,2),S=C[0],T=C[1],A=function(){x({}),j(!1)},N=function(){var e=Object(m.a)(u.a.mark((function e(t){var a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,$(t);case 3:a=e.sent,c(a.data.data),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),b.a.notify("".concat(e.t0.response.statusText),{position:"top"});case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}(),R=function(e,t,a){T(t),j(!0),x(Object(l.a)(Object(l.a)({},e),{},{parentId:a}))},I=function(){var e=Object(m.a)(u.a.mark((function e(t){var a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.isActive=!1,e.prev=1,e.next=4,V(t);case 4:a=e.sent,b.a.notify("".concat(a.data.message),{position:"top"}),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),b.a.notify("".concat(e.t0.response.statusText),{position:"top"});case 11:N(p);case 12:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t){return e.apply(this,arguments)}}(),L=function(){var e=Object(m.a)(u.a.mark((function e(t,a){var n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,!t.includes("Edit")){e.next=7;break}return e.next=4,V(a);case 4:n=e.sent,e.next=10;break;case 7:return e.next=9,Q(a);case 9:n=e.sent;case 10:b.a.notify("".concat(n.data.message),{position:"top"}),j(!1),x({}),e.next=18;break;case 15:e.prev=15,e.t0=e.catch(0),b.a.notify("".concat(e.t0.response.statusText),{position:"top"});case 18:N(p);case 19:case"end":return e.stop()}}),e,null,[[0,15]])})));return function(t,a){return e.apply(this,arguments)}}(),B=function(){var e=Object(m.a)(u.a.mark((function e(t){var a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,M(t._id);case 3:a=e.sent,b.a.notify("".concat(a.data.message),{position:"top"}),N(p),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),b.a.notify("".concat(e.t0.response.statusText),{position:"top"});case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}(),H=Object(n.useRef)(f.a.debounce((function(e){N(e),v(e)}),1e3));return r.a.createElement(d.a,null,r.a.createElement(q,{onHandleChange:function(e){H.current(e)},addEditTask:R}),r.a.createElement("hr",null),a?r.a.createElement(P,{tasks:a,deleteTask:B,addEditTask:R,markAscomplete:I}):"",r.a.createElement(Z,{show:k,onHide:A,action:S,taskObj:g,actioncallback:L}))};var te=a(117),ae=a(118),ne=function(e){var t=Object(n.useState)(""),a=Object(s.a)(t,2),c=a[0],o=a[1];return r.a.createElement(X.a,e,r.a.createElement(X.a.Header,{closeButton:!0},r.a.createElement(X.a.Title,null,"Enter Your Role")),r.a.createElement(X.a.Body,null,r.a.createElement(L.a,null,r.a.createElement(L.a.Group,{as:A.a,controlId:"formPlaintextEmail"},r.a.createElement(L.a.Label,{column:!0,sm:"2"},"Role"),r.a.createElement(y.a,{sm:"10"},r.a.createElement(L.a.Control,{type:"text",placeholder:"Enter your role",onChange:function(e){return o(e.target.value)}}))))),r.a.createElement(X.a.Footer,null,r.a.createElement(R.a,{variant:"secondary",onClick:e.onHide},"Close"),r.a.createElement(R.a,{variant:"primary",onClick:function(){return e.onSubmit(c)}},"Save Changes")))};function re(e){var t=e.text,a=C(),c=a.role,o=a.setRole,l=Object(n.useState)(!1),i=Object(s.a)(l,2),u=i[0],m=i[1],d=function(e){o(e),m(!1),"admin"===e&&b.a.notify("You are admin now",{position:"top"})};return r.a.createElement(te.a,{expand:"lg",variant:"dark",bg:"dark"},r.a.createElement(te.a.Brand,{href:"#home"},t),r.a.createElement(te.a.Toggle,{"aria-controls":"basic-navbar-nav"}),r.a.createElement(te.a.Collapse,{id:"basic-navbar-nav",className:"justify-content-end"},r.a.createElement(ae.a,null,"admin"!==c?r.a.createElement(ae.a.Link,{onClick:function(){return m(!0)}},"Login"):r.a.createElement(ae.a.Link,{onClick:function(){return o()}},"Logout"))),r.a.createElement(ne,{show:u,onHide:function(){return m(!1)},onSubmit:d}))}re.defaultProps={text:"Todos App"};var ce=re,oe=a(9),se=a(20),le=a(15),ie=a(14),ue=function(e){Object(le.a)(a,e);var t=Object(ie.a)(a);function a(e){var n;return Object(oe.a)(this,a),(n=t.call(this,e)).state={hasError:!1},n}return Object(se.a)(a,[{key:"componentDidCatch",value:function(e,t){}},{key:"render",value:function(){return this.state.hasError?r.a.createElement("h1",null,"Something went wrong."):this.props.children}}],[{key:"getDerivedStateFromError",value:function(e){return{hasError:!0}}}]),a}(r.a.Component),me=a(74),de=a.n(me);a(107);var pe=function(){var e=localStorage.getItem("role"),t=Object(n.useState)(e),a=Object(s.a)(t,2),c=a[0],o=a[1];return r.a.createElement(w.Provider,{value:{role:c,setRole:function(e){e?localStorage.setItem("role",e):localStorage.removeItem("role"),o(e)}}},r.a.createElement("div",{className:"App"},r.a.createElement("div",{className:"h-100 w-100"},r.a.createElement(de.a,{style:{position:"relative",top:"50%",left:"50%"},promiseTracker:z.usePromiseTracker,color:"#282c34",background:"rgba(255,255,255,0.200)"})),r.a.createElement(ue,null,r.a.createElement(ce,{className:"navbar"}),r.a.createElement("br",null),r.a.createElement(ee,null))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(r.a.createElement(pe,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},75:function(e,t,a){e.exports=a(108)},80:function(e,t,a){}},[[75,1,2]]]);
//# sourceMappingURL=main.4bc92fd4.chunk.js.map